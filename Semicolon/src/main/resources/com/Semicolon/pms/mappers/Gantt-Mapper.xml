<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.Semicolon.pms.dao.GanttDAO">

    <select id="getGanttDataByProjectId" resultType="com.Semicolon.pms.dao.GanttDAO" parameterType="int">
        SELECT
            TASK_ID,
            PROJECT_ID,
            GANTT_TITLE,
            GANTT_MANAGER_ID,
            GANTT_START_DATE,
            GANTT_END_DATE,
            GANTT_MODIFY_DATE
        FROM
            GANTT
        WHERE
            PROJECT_ID = #{projectId}
    </select>

    <update id="updateGanttByTask" parameterType="com.Semicolon.pms.dao.GanttDAO">
        UPDATE GANTT
           SET GANTT_TITLE = #{ganttTitle},
               GANTT_MANAGER_ID = #{ganttManagerId},
               GANTT_START_DATE = #{ganttStartDate, jdbcType=DATE},
               GANTT_END_DATE = #{ganttEndDate, jdbcType=DATE},
               GANTT_MODIFY_DATE = SYSDATE
         WHERE PROJECT_ID = #{projectId}
           AND TASK_ID = #{taskId}
    </update>

    <delete id="deleteGanttByTaskId" parameterType="com.Semicolon.pms.dao.GanttDAO">
        DELETE FROM GANTT
         WHERE PROJECT_ID = #{projectId}
           AND TASK_ID = #{taskId}
    </delete>
    
</mapper>