<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.Semicolon.org.mapper.OrgDetailMapper">

    <resultMap id="orgDetailResultMap" type="com.Semicolon.org.dto.OrgDetailDTO">
        <result column="OR_ID" property="orId"/>
        <result column="OR_NAME" property="orName"/>
        <result column="OR_IS_PUBLIC" property="orIsPublic"/>
        <result column="OR_INTRODUCE" property="orIntroduce"/>
        <result column="OR_PROJECT" property="orProject"/>
        <result column="OR_CREATE_DATE" property="orCreateDate"/>
        <result column="TOTAL_DONATION" property="totalDonation"/>
        <result column="DONATION" property="donation"/>
        <result column="MEMBER" property="member"/>
        <result column="MEMBER_ID" property="memberId"/>
        <result column="MEMBER_ROLE" property="memberRole"/>
        <result column="MEMBER_STATUS" property="memberStatus"/>
        <result column="OR_LINK_ADDRESS" property="orLinkAddress"/> <!-- 추가된 컬럼 -->
    </resultMap>

    <!-- 조직 상세 정보 조회 쿼리 -->
    <select id="selectOrgDetailByOrId" parameterType="String" resultMap="orgDetailResultMap">
        SELECT 
            OR_ID,
            OR_NAME,
            OR_IS_PUBLIC,
            OR_INTRODUCE,
            OR_PROJECT,
            OR_CREATE_DATE,
            TOTAL_DONATION,
            DONATION,
            MEMBER,
            MEMBER_ID,
            MEMBER_ROLE,
            MEMBER_STATUS,
            OR_LINK_ADDRESS  <!-- DB 컬럼 추가 -->
        FROM ORGANIZATION
        WHERE OR_ID = #{orId}
    </select>
    
    <!-- 조직 정보 수정 쿼리 (필요하다면) -->
    <update id="updateOrg" parameterType="com.Semicolon.org.dto.OrgDetailDTO">
        UPDATE ORGANIZATION
        SET 
            OR_NAME = #{orName},
            OR_IS_PUBLIC = #{orIsPublic},
            OR_INTRODUCE = #{orIntroduce},
            OR_PROJECT = #{orProject},
            OR_LINK_ADDRESS = #{orLinkAddress} <!-- 수정 시에도 컬럼 업데이트 -->
        WHERE OR_ID = #{orId}
    </update>

    <!-- 조직 정보 삭제 쿼리 -->
    <delete id="deleteOrg" parameterType="String">
        DELETE FROM ORGANIZATION WHERE OR_ID = #{orId}
    </delete>

</mapper>
